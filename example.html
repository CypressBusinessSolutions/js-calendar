<!DOCTYPE html>
<html>
    <head>
        <link href="./dev/js-calendar.css" type="text/css" rel="stylesheet" />
    </head>
    <body>
        <h1>JS Calendar</h1>
        <hr />

        <div id="test-instance" class="js-calendar">

        </div>

        <div id="errorWrapper" style="color:#999;">
            No uncaught error!
        </div>

        <script src="./dev/debug.js"></script>
        <script src="./dev/js-calendar.js"></script>
        <script>
            JSCalendar.on('new', function(cal, xtra) {
                log("Class level hook caught for instance with id " + cal.id)
            });

            var today = new Date();

            var calendar = new JSCalendar(document.getElementById('test-instance'));
            calendar.init();
            calendar.on('willRender', function() {
                if (calendar.state.month == today.getMonth()) {
                    calendar.setMatrix({
                        "5"  : [{displayname : "You can't miss this event"}],
                        "12" : [
                            {
                                displayname : "A very important meeting", 
                                at : new Date(today.getFullYear(), today.getMonth(), 12, 15, 30).getTime()
                            },
                            {
                                displayname : "A somewhat important 2 hours meeting", 
                                at : new Date(today.getFullYear(), today.getMonth(), 12, 17, 30).getTime(),
                                duration : 1000 * 60 * 60 * 2
                            },
                            {
                                displayname : "This meeting is so important it's red", 
                                color : "#9c3d27",
                                at : new Date(today.getFullYear(), today.getMonth(), 12, 21, 55).toString()
                            }
                        ],
                        "15" : [
                            {
                                displayname : "Something else to do here", 
                                at : new Date(0, 0, 0, 9, 30).toString()
                            }
                        ],
                        "16" : [{displayname : "Something to do here"}],
                        "17" : [{at : new Date(0, 0, 0, 10, 25).getTime()}],
                        "26" : [
                            {
                                displayname : "An event by the end of the month",
                                at : new Date(0,0,0, 9)
                            }
                        ],
                        "29" : [
                            {
                                displayname : "Short monthly recap meeting",
                                at : new Date(0,0,0, 15, 30),
                                duration : 1000 * 60 * 30
                            }
                        ]
                    });
                } else {
                    calendar.setMatrix();
                }
            }).render();
        </script>
    </body>
</html>
